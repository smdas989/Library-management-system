{% extends "base.html" %}
<style>
  
.inner {  
  border: 1px solid black;
}

.outer {
  border: 1px solid red;
  width:100%;
  display: flex;
  justify-content: center;
}
</style>

{% block content %}
<h4>Available Books</h4><br>
  {% for message in messages %}

    <div class="alert alert-danger">
        <a class="close" data-dismiss="alert">Ã—</a>

        {{ message }}

    </div>
  {% endfor %}
<table class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Image</th>
      <th scope="col">Title</th>
      <th scope="col">Author</th>
      <th scope="col">Genre</th>
      <th scope="col">No of copies</th>
      <th scope="col">Available copies</th>
      {% if user.is_superuser %}
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
      {% else %}
      <th scope="col">Issue</th>
      {% endif %}
      
      
    </tr>
  </thead>
  <tbody>
{% for book in books%}

    <tbody>
      <tr>
        <td><img style="height: 50px; width: 50px;" src="{{book.book_image.url}}"/></td>        
        <td> <a href='{% url 'library:show_book_details' book.id  %}'>{{ book.title }}</a></td>
        <td>{{ book.author }}</td>
        <td>{{ book.genre }}</td>
        <td >{{ book.no_of_copies }}</td>
        <td >{{ book.no_of_available_copies }}</td>
        {% if user.is_superuser %}
        <td><button type="button" class="btn btn-success" onclick="location.href='{% url 'library:update_book' book.id  %}'" >Edit</button></td>
        <td><button type="button" class="btn btn-danger" onclick="location.href='{% url 'library:delete_book' book.id  %}'" >Delete</button></td>
        {% else %}
        <td><input type="button" onclick="location.href='{% url 'library:issue_book' book.id %}'" class="btn btn-info" value="Issue"></td>
        {% endif %}
      </tr>
      {% endfor %}  
  </tbody>
</table>



<div class="outer">
  <div class="inner">
     



    

    
    <div class="container p-4">
      <div class="pagination justify-content-center">
          <span class="step-links">
            {% if books.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ books.previous_page_number }}">previous</a>
            {% endif %}

              <span class="current">
                  Page {{ books.number }} of {{ books.paginator.num_pages }}
              </span>

            {% if books.has_next %}
                <a href="?page={{ books.next_page_number }}">next</a>
                <a href="?page={{ books.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
          </span>
          </div>
      </div>













{% endblock %}
